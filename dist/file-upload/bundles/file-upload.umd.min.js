!function(e,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports,require("rxjs/operators"),require("@angular/router"),require("@angular/platform-browser"),require("@angular/forms"),require("@angular/cdk/a11y"),require("@angular/cdk/drag-drop"),require("@angular/cdk/portal"),require("@angular/cdk/scrolling"),require("@angular/cdk/stepper"),require("@angular/cdk/table"),require("@angular/cdk/tree"),require("@angular/material/autocomplete"),require("@angular/material/badge"),require("@angular/material/bottom-sheet"),require("@angular/material/button"),require("@angular/material/button-toggle"),require("@angular/material/card"),require("@angular/material/checkbox"),require("@angular/material/chips"),require("@angular/material/stepper"),require("@angular/material/datepicker"),require("@angular/material/dialog"),require("@angular/material/divider"),require("@angular/material/expansion"),require("@angular/material/grid-list"),require("@angular/material/icon"),require("@angular/material/input"),require("@angular/material/list"),require("@angular/material/menu"),require("@angular/material/core"),require("@angular/material/paginator"),require("@angular/material/progress-bar"),require("@angular/material/progress-spinner"),require("@angular/material/radio"),require("@angular/material/select"),require("@angular/material/sidenav"),require("@angular/material/slider"),require("@angular/material/slide-toggle"),require("@angular/material/snack-bar"),require("@angular/material/sort"),require("@angular/material/table"),require("@angular/material/tabs"),require("@angular/material/toolbar"),require("@angular/material/tooltip"),require("@angular/material/tree"),require("@angular/common/http"),require("@angular/core")):"function"==typeof define&&define.amd?define("file-upload",["exports","rxjs/operators","@angular/router","@angular/platform-browser","@angular/forms","@angular/cdk/a11y","@angular/cdk/drag-drop","@angular/cdk/portal","@angular/cdk/scrolling","@angular/cdk/stepper","@angular/cdk/table","@angular/cdk/tree","@angular/material/autocomplete","@angular/material/badge","@angular/material/bottom-sheet","@angular/material/button","@angular/material/button-toggle","@angular/material/card","@angular/material/checkbox","@angular/material/chips","@angular/material/stepper","@angular/material/datepicker","@angular/material/dialog","@angular/material/divider","@angular/material/expansion","@angular/material/grid-list","@angular/material/icon","@angular/material/input","@angular/material/list","@angular/material/menu","@angular/material/core","@angular/material/paginator","@angular/material/progress-bar","@angular/material/progress-spinner","@angular/material/radio","@angular/material/select","@angular/material/sidenav","@angular/material/slider","@angular/material/slide-toggle","@angular/material/snack-bar","@angular/material/sort","@angular/material/table","@angular/material/tabs","@angular/material/toolbar","@angular/material/tooltip","@angular/material/tree","@angular/common/http","@angular/core"],a):a(e["file-upload"]={},e.rxjs.operators,e.ng.router,e.ng.platformBrowser,e.ng.forms,e.ng.cdk.a11y,e.ng.cdk["drag-drop"],e.ng.cdk.portal,e.ng.cdk.scrolling,e.ng.cdk.stepper,e.ng.cdk.table,e.ng.cdk.tree,e.ng.material.autocomplete,e.ng.material.badge,e.ng.material["bottom-sheet"],e.ng.material.button,e.ng.material["button-toggle"],e.ng.material.card,e.ng.material.checkbox,e.ng.material.chips,e.ng.material.stepper,e.ng.material.datepicker,e.ng.material.dialog,e.ng.material.divider,e.ng.material.expansion,e.ng.material["grid-list"],e.ng.material.icon,e.ng.material.input,e.ng.material.list,e.ng.material.menu,e.ng.material.core,e.ng.material.paginator,e.ng.material["progress-bar"],e.ng.material["progress-spinner"],e.ng.material.radio,e.ng.material.select,e.ng.material.sidenav,e.ng.material.slider,e.ng.material["slide-toggle"],e.ng.material["snack-bar"],e.ng.material.sort,e.ng.material.table,e.ng.material.tabs,e.ng.material.toolbar,e.ng.material.tooltip,e.ng.material.tree,e.ng.common.http,e.ng.core)}(this,function(e,r,a,t,i,n,o,l,s,p,u,d,c,g,m,f,h,b,v,y,M,x,k,w,D,q,U,F,I,B,S,R,C,T,A,z,P,j,L,H,O,_,N,E,$,G,K,V){"use strict";var X=(Y.prototype.upload=function(e,a){var t=new FormData;return t.append("file",a.file),t.append("type",a.type),t.append("path",a.path),t.append("prefix",a.prefix),this.httpClient.post(e,t,{reportProgress:!0,observe:"events"}).pipe(r.map(function(e){switch(e.type){case K.HttpEventType.UploadProgress:var a=Math.round(100*e.loaded/e.total);return 0<=a&&a<=100?{status:"progress",data:{totalData:e.total,loadedData:e.loaded,percentage:a}}:{status:"complete",data:null};case K.HttpEventType.Response:return"success"==e.body.status?{status:"complete",data:e.body}:{status:"error",data:"An error occord."};default:return{status:"waiting",data:""}}}))},Y.prototype.uploadBase64=function(e,a){var t={headers:new K.HttpHeaders({"Content-Type":"application/json"})};return this.httpClient.post(e,a,t)},Y.decorators=[{type:V.Injectable,args:[{providedIn:"root"}]}],Y.ctorParameters=function(){return[{type:K.HttpClient}]},Y.ngInjectableDef=V.defineInjectable({factory:function(){return new Y(V.inject(K.HttpClient))},token:Y,providedIn:"root"}),Y);function Y(e){this.httpClient=e,this.BASE_URL="http://3.15.236.141:5005/uploads"}var J=(Q.prototype.onNoClick=function(){this.dialogRef.close()},Q.prototype.ngOnInit=function(){},Q.decorators=[{type:V.Component,args:[{selector:"lib-dialog-box",template:'<h1 mat-dialog-title>Are you sure ??</h1>\n<div mat-dialog-actions>\n  <button mat-button type="button" [mat-dialog-close]="false" (click)="onNoClick()">No Thanks</button>\n  <button mat-button type="button" [mat-dialog-close]="true" cdkFocusInitial>Yes</button>\n</div>',styles:[""]}]}],Q.ctorParameters=function(){return[{type:k.MatDialogRef},{type:undefined,decorators:[{type:V.Inject,args:[k.MAT_DIALOG_DATA]}]}]},Q);function Q(e,a){this.dialogRef=e,this.data=a}var W=(Z.prototype.onNoClick=function(){this.dialogRef.close()},Z.prototype.ngOnInit=function(){},Z.decorators=[{type:V.Component,args:[{selector:"lib-preview-files",template:'<h2 mat-dialog-title>File Preview</h2>\n<mat-dialog-content class="mat-typography">\n  <img mat-card-image [src]="this.data.imgURL" *ngIf="this.data.imgURL">\n</mat-dialog-content>\n<mat-dialog-actions align="end">\n  <button mat-button type="button" mat-dialog-close>Cancel</button>\n</mat-dialog-actions>',styles:["img{max-width:100%;max-height:64vh}"]}]}],Z.ctorParameters=function(){return[{type:k.MatDialogRef},{type:undefined,decorators:[{type:V.Inject,args:[k.MAT_DIALOG_DATA]}]}]},Z);function Z(e,a){this.dialogRef=e,this.data=a}var ee=(Object.defineProperty(ae.prototype,"config",{set:function(e){this.configData=e},enumerable:!0,configurable:!0}),ae.prototype.ngOnInit=function(){},ae.prototype.selectFiles=function(e){this.loading=!0;for(var a=0;a<e.length;a++){var t=this.files.length,r=e[a],i=this.checkingValidation(r);if(i.status)r.valid={status:!0},r.upload={status:"selected"},r.viewUrl="https://loading.io/spinners/dual-ring/lg.dual-ring-loader.gif",this.files.push(r),this.viewFiles(t,r);else{r.valid={status:!1,message:i.message},r.upload={status:"selected"},r.viewUrl=null;var n=r.type.split("/");r.viewText=n[1],this.files.push(r)}}},ae.prototype.viewFiles=function(t,e){var r=this,a=e.type.split("/");if("image"==a[0]){var i=new FileReader;this.files[t],i.readAsDataURL(this.files[t]),i.onload=function(e){var a=i.result;r.files[t].viewUrl=a}}else this.files[t].viewUrl=null,this.files[t].viewText=a[1]},ae.prototype.checkingValidation=function(e){var a={status:!0,message:null},t=e.type.split("/");return 0==this.configData.format.includes(t[1])?(a.status=!1,a.message=t[1].toUpperCase()+" format not supported.",this.openSnackBar(t[1].toUpperCase()+" format not supported.",""),a):e.size/1e3>this.configData.size?(a.status=!1,a.message="File size too large. Maximum file size limit: "+this.configData.size+" KB.",this.openSnackBar("File size too large. Maximum file size limit: "+this.configData.size+" KB.",""),a):1==a.status?a:void 0},ae.prototype.uploadAll=function(e){void 0===e&&(e=null);for(var a=0;a<this.files.length;a++)1==this.files[a].valid.status&&"complete"!=this.files[a].upload.status&&this.uploading(a)},ae.prototype.uploading=function(t){var r=this,e={file:this.files[t],type:this.configData.type,path:this.configData.path,prefix:this.configData.prefix,uploadType:this.configData.uploadType},a=this.configData.baseUrl+this.configData.endpoint+"?path="+this.configData.path+"&prefix="+this.configData.prefix+"&type="+this.configData.type+"&rand="+t;this.fileUploadService.upload(a,e).subscribe(function(e){var a=e;switch(a.status){case"complete":r.files[t].upload=a,r.configData.files=r.files,r.openSnackBar("Successfully Uploaded !!","Undo");break;case"error":r.files[t].upload=a.data,r.openSnackBar(a.data,"");break;default:r.files[t].upload=a}},function(e){r.files[t]={status:"error"},r.openSnackBar("An error occurred !!","Retry")})},ae.prototype.removeFiles=function(a){var t=this;void 0===a&&(a=null),this.openDialog(),this.dialogRef.afterClosed().subscribe(function(e){e&&(t.files.splice(a,1),t.openSnackBar("Successfully Remove !!",""))})},ae.prototype.openSnackBar=function(e,a){this._snackBar.open(e,a,{duration:2e3})},ae.prototype.openDialog=function(){this.dialogRef=this.dialog.open(J,{width:"250px",data:{message:"Message"}})},ae.prototype.deleteAll=function(){var a=this;this.openDialog(),this.dialogRef.afterClosed().subscribe(function(e){e&&(a.files.splice(0,a.files.length),a.openSnackBar("Successfully Remove !!",""))})},ae.prototype.previewFiles=function(e){var t=this;if(null!=this.files[e].type.match(/image\/*/)){var r=new FileReader;this.files[e],r.readAsDataURL(this.files[e]),r.onload=function(e){var a=r.result;t.dialog.open(W,{data:{imgURL:a}})}}else this.openSnackBar("Preview not supported.","")},ae.decorators=[{type:V.Component,args:[{selector:"lib-file-upload",template:'\x3c!-- File Upload --\x3e\n<div class="uploadfilecontainer" (click)="fileInput.click()" libDragDrop (onFileDropped)="selectFiles($event)">\n    <input hidden type="file" #fileInput (change)="selectFiles($event.target.files)" multiple>\n    <div class="uploadtextwrapper">\n        <h2>Drag and Drop Files</h2>\n        <p>Supported Formats:\n            <ng-container *ngFor="let val of configData.format; let i = index">\n                {{ val }}<ng-container *ngIf="i + 1 < configData.format.length">,</ng-container>\n            </ng-container>\n        </p>\n        <p>MAX Size: {{ configData.size / 1024 | number: \'.1-2\' }} MB</p>\n    </div>\n</div>\n\n<div class="button-group" *ngIf="files.length > 0">\n    <button mat-raised-button color="primary" type="button" (click)="uploadAll();">Upload All</button>\n    <button mat-raised-button color="warn" type="button" (click)="deleteAll();">Delete All</button>\n</div>\n\n<div class="files-view">\n    \x3c!-- View Files --\x3e\n    <mat-card class="example-card" *ngFor="let file of files; let i = index;">\n        <span class="viewUrlwrapper">\n            <div *ngIf="file.viewUrl == null" (click)="previewFiles(i);" class="othersFilePreview"> <h2 style="color:white; font-weight: bold;">{{ file.viewText | uppercase }}</h2></div>\n            <img mat-card-image *ngIf="file.viewUrl != null" [src]="file.viewUrl" alt="{{ file.name }}" (click)="previewFiles(i);" />\n        </span>\n        <span class="viewUrlcontent">\n            <mat-card-header>\n                <mat-card-title>{{ file.name }}</mat-card-title>\n                <mat-card-subtitle class="fileDescription">Type: {{ file.type }}, Size:\n                    <ng-container *ngIf="file.size / 1000 > 999">\n                        {{ file.size / 1000 / 1000 | number: \'.1-2\' }} MB\n                    </ng-container>\n                    <ng-container *ngIf="file.size / 1000 < 1000">\n                        {{ file.size / 1000 | number: \'.1-2\' }} KB\n                    </ng-container>\n                </mat-card-subtitle>\n                <mat-card-subtitle class="error" *ngIf="file.valid.status == false">{{ file.valid.message }}\n                </mat-card-subtitle>\n            </mat-card-header>\n\n            <mat-card-content>\n                <mat-progress-bar mode="determinate" *ngIf="file.upload.status == \'progress\'"\n                    value="{{ file.upload.data.percentage }}"></mat-progress-bar>\n                <mat-progress-bar mode="indeterminate" *ngIf="file.upload.status == \'waiting\'"></mat-progress-bar>\n            </mat-card-content>\n\n            <mat-card-actions>\n                \x3c!-- <button mat-raised-button matTooltip="Preview" *ngIf="file.valid.status == true" aria-label="Preview" (click)="previewFiles(i);">Preview</button> --\x3e\n\n                <button mat-raised-button color="primary" type="button"\n                    *ngIf="file.valid.status == true && file.upload.status != \'complete\'" matTooltip="Upload"\n                    aria-label="Upload" (click)="uploading(i);">Upload</button>\n                <button mat-raised-button type="button" disabled *ngIf="file.upload.status == \'complete\'">Upload Complete</button>\n\n                <button mat-raised-button type="button" color="warn" matTooltip="Remove" aria-label="Remove"\n                    (click)="removeFiles(i);">Remove</button>\n            </mat-card-actions>\n        </span>\n    </mat-card>\n</div>',styles:[".uploadfilecontainer{background-repeat:no-repeat;background-size:100px;background-position:center;height:200px;width:80%;margin:20px auto;border:2px dashed #1c8adb;border-radius:10px;text-align:center;display:flex;justify-content:center;align-items:center}.uploadfilecontainer:hover{cursor:pointer;background-color:#9ecbec!important;opacity:.8}.button-group{background-repeat:no-repeat;background-size:100px;background-position:center;height:40px;width:80%;margin:20px auto;border-radius:10px}.error.mat-card-subtitle{color:#a00;text-align:left}.example-card{margin:6px auto auto;max-width:100%}.example-header-image{background-image:url(https://material.angular.io/assets/img/examples/shiba1.jpg);background-size:cover}.progress-bar{margin-top:24px}.file-div{background-color:#dedddc;margin-top:6px}.othersFilePreview{background-color:#8a2be2;height:100%;width:100%;text-align:center;justify-content:center;align-items:center;display:flex}.fileDescription{text-align:left}.files-view{background-repeat:no-repeat;background-size:cover;background-position:center;height:auto!important;width:82%;margin:20px auto;border-radius:10px;display:flex;justify-content:center;align-items:stretch;flex-wrap:wrap}.files-view .mat-card{position:relative;z-index:9;flex:1 1 28.33%;margin:10px!important;display:flex;flex-wrap:wrap}.viewUrlwrapper{height:160px;width:100%;overflow:hidden;position:relative}.viewUrlwrapper img{max-width:100%;-o-object-fit:cover;object-fit:cover;margin:0 auto;z-index:99;position:relative;max-width:100%;width:initial;display:block;margin-top:-46px!important}.viewUrlcontent{display:block;justify-content:center;align-items:stretch;flex-wrap:wrap;flex:1 1 100%}.viewUrlcontent .mat-card-header{display:flex;flex-direction:row;flex:1 1 100%;justify-content:center;text-align:center;flex-wrap:wrap}.viewUrlcontent .mat-progress-bar{margin-bottom:5px}.viewUrlcontent .mat-card-header .mat-card-header-text{margin:10px;width:100%}.viewUrlcontent .mat-card-header .mat-card-header-text .mat-card-title{width:100%;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;line-height:19px;max-height:40px;-webkit-line-clamp:2}.mat-typography .mat-card-image{width:inherit!important;margin:0!important}"]}]}],ae.ctorParameters=function(){return[{type:i.FormBuilder},{type:X},{type:a.ActivatedRoute},{type:a.Router},{type:H.MatSnackBar},{type:k.MatDialog}]},ae.propDecorators={config:[{type:V.Input}]},ae);function ae(e,a,t,r,i,n){this.formBuilder=e,this.fileUploadService=a,this.ActivatedRoute=t,this.router=r,this._snackBar=i,this.dialog=n,this.formData=new FormData,this.files=[],this.filesProcess=[],this.totalFile=0,this.loading=!1}var te=(re.decorators=[{type:V.NgModule,args:[{exports:[n.A11yModule,p.CdkStepperModule,u.CdkTableModule,d.CdkTreeModule,o.DragDropModule,c.MatAutocompleteModule,g.MatBadgeModule,m.MatBottomSheetModule,f.MatButtonModule,h.MatButtonToggleModule,b.MatCardModule,v.MatCheckboxModule,y.MatChipsModule,M.MatStepperModule,x.MatDatepickerModule,k.MatDialogModule,w.MatDividerModule,D.MatExpansionModule,q.MatGridListModule,U.MatIconModule,F.MatInputModule,I.MatListModule,B.MatMenuModule,S.MatNativeDateModule,R.MatPaginatorModule,C.MatProgressBarModule,T.MatProgressSpinnerModule,A.MatRadioModule,S.MatRippleModule,z.MatSelectModule,P.MatSidenavModule,j.MatSliderModule,L.MatSlideToggleModule,H.MatSnackBarModule,O.MatSortModule,_.MatTableModule,N.MatTabsModule,E.MatToolbarModule,$.MatTooltipModule,G.MatTreeModule,l.PortalModule,s.ScrollingModule]}]}],re);function re(){}var ie=(ne.prototype.onDragOver=function(e){e.preventDefault(),e.stopPropagation(),this.background="#9ecbec",this.opacity="0.8"},ne.prototype.onDragLeave=function(e){e.preventDefault(),e.stopPropagation(),this.background="#f5fcff",this.opacity="1"},ne.prototype.ondrop=function(e){e.preventDefault(),e.stopPropagation(),this.background="#f5fcff",this.opacity="1";var a=e.dataTransfer.files;0<a.length&&this.onFileDropped.emit(a)},ne.decorators=[{type:V.Directive,args:[{selector:"[libDragDrop]"}]}],ne.propDecorators={onFileDropped:[{type:V.Output}],background:[{type:V.HostBinding,args:["style.background-color"]}],opacity:[{type:V.HostBinding,args:["style.opacity"]}],onDragOver:[{type:V.HostListener,args:["dragover",["$event"]]}],onDragLeave:[{type:V.HostListener,args:["dragleave",["$event"]]}],ondrop:[{type:V.HostListener,args:["drop",["$event"]]}]},ne);function ne(){this.onFileDropped=new V.EventEmitter,this.background="#f5fcff",this.opacity="1"}var oe=(le.prototype.ngOnInit=function(){},le.decorators=[{type:V.Component,args:[{selector:"lib-alert-message",template:'<span class="example-pizza-party">\n  An error occurred.\n</span>',styles:[".example-pizza-party{color:#ff69b4}"]}]}],le.ctorParameters=function(){return[]},le);function le(){}var se=(pe.decorators=[{type:V.NgModule,args:[{declarations:[ee,ie,oe,J,W],imports:[t.BrowserModule,te,i.FormsModule,i.ReactiveFormsModule,K.HttpClientModule],providers:[],exports:[ee],entryComponents:[oe,J,W]}]}],pe);function pe(){}e.FileUploadService=X,e.FileUploadComponent=ee,e.FileUploadModule=se,e.ɵe=te,e.ɵb=oe,e.ɵc=J,e.ɵd=W,e.ɵa=ie,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=file-upload.umd.min.js.map